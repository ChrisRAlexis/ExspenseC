(()=>{var e={};e.id=724,e.ids=[724],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},98432:e=>{"use strict";e.exports=require("bcryptjs")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},52196:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),r(25294),r(53391),r(98052),r(35866),r(15495);var t=r(23191),a=r(88716),l=r(37922),n=r.n(l),i=r(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(s,d);let o=["",{children:["(dashboard)",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25294)),"/Users/chrisalexis/travel-expense-crm/src/app/(dashboard)/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,53391)),"/Users/chrisalexis/travel-expense-crm/src/app/(dashboard)/layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,98052)),"/Users/chrisalexis/travel-expense-crm/src/app/(dashboard)/template.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"/Users/chrisalexis/travel-expense-crm/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/chrisalexis/travel-expense-crm/src/app/(dashboard)/settings/page.tsx"],x="/(dashboard)/settings/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},52649:(e,s,r)=>{Promise.resolve().then(r.bind(r,47571))},5932:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});let t=(0,r(62881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},47571:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(10326),a=r(17577),l=r(77109),n=r(35047),i=r(91664),d=r(41190),o=r(86016),c=r(29752),x=r(38443),u=r(79635),p=r(5932),m=r(58038);let h=(0,r(62881).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),g=[{value:"",label:"Not assigned"},{value:"engineering",label:"Engineering"},{value:"sales",label:"Sales"},{value:"marketing",label:"Marketing"},{value:"operations",label:"Operations"},{value:"finance",label:"Finance"},{value:"hr",label:"Human Resources"},{value:"other",label:"Other"}];function b(){let{data:e,update:s}=(0,l.useSession)();(0,n.useRouter)();let[r,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(e?.user?.name||""),[j,w]=(0,a.useState)(e?.user?.department||""),[N,y]=(0,a.useState)(!1);async function C(){b(!0);try{(await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,department:j})})).ok&&(await s({name:f,department:j}),y(!0),setTimeout(()=>y(!1),3e3))}catch(e){console.error("Failed to update profile:",e)}finally{b(!1)}}return e?(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Settings"}),(0,t.jsxs)(c.Card,{children:[t.jsx(c.CardHeader,{children:t.jsx(c.CardTitle,{className:"text-base",children:"Profile"})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b border-slate-200",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-primary-100 flex items-center justify-center",children:t.jsx("span",{className:"text-2xl font-bold text-primary-700",children:e.user.name?.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-semibold text-lg text-slate-900",children:e.user.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(x.Badge,{variant:"ADMIN"===e.user.role?"approved":"APPROVER"===e.user.role?"pending":"default",children:e.user.role}),e.user.department&&t.jsx("span",{className:"text-sm text-slate-500",children:e.user.department})]})]})]}),t.jsx(d.I,{label:"Full Name",value:f,onChange:e=>v(e.target.value),icon:t.jsx(u.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-slate-50 rounded-lg",children:[t.jsx(p.Z,{className:"h-4 w-4 text-slate-400"}),t.jsx("span",{className:"text-slate-600",children:e.user.email})]}),t.jsx(o.P,{label:"Department",options:g,value:j,onChange:e=>w(e.target.value)}),t.jsx(i.z,{onClick:C,loading:r,className:"w-full",children:N?"Saved!":"Save Changes"})]})]}),(0,t.jsxs)(c.Card,{children:[t.jsx(c.CardHeader,{children:(0,t.jsxs)(c.CardTitle,{className:"text-base flex items-center gap-2",children:[t.jsx(m.Z,{className:"h-4 w-4"}),"Permissions"]})}),t.jsx(c.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:["ADMIN"===e.user.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can submit expenses"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can approve all expenses"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can manage users"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can configure workflows"]})]}),"APPROVER"===e.user.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can submit expenses"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can approve assigned expenses"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[t.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full"}),"Cannot manage users"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[t.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full"}),"Cannot configure workflows"]})]}),"EMPLOYEE"===e.user.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Can submit expenses"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[t.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full"}),"Cannot approve expenses"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[t.jsx("span",{className:"w-2 h-2 bg-slate-300 rounded-full"}),"Cannot manage users"]})]})]})})]}),t.jsx(c.Card,{children:t.jsx(c.CardContent,{className:"py-4",children:(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>(0,l.signOut)({callbackUrl:"/login"}),className:"w-full text-red-600 hover:bg-red-50 border-red-200",children:[t.jsx(h,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})})]}):null}},38443:(e,s,r)=>{"use strict";r.d(s,{Badge:()=>n});var t=r(10326),a=r(17577),l=r(51223);let n=(0,a.forwardRef)(({className:e,variant:s="default",...r},a)=>t.jsx("span",{ref:a,className:(0,l.cn)("badge",{default:"bg-slate-100 text-slate-700",draft:"bg-slate-100 text-slate-700",pending:"bg-yellow-100 text-yellow-700",approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",changes:"bg-orange-100 text-orange-700"}[s],e),...r}));n.displayName="Badge"},91664:(e,s,r)=>{"use strict";r.d(s,{z:()=>n});var t=r(10326),a=r(17577),l=r(51223);let n=(0,a.forwardRef)(({className:e,variant:s="primary",size:r="md",loading:a,disabled:n,children:i,...d},o)=>{let c=`
      inline-flex items-center justify-center font-semibold rounded-xl
      transition-all duration-200
      focus:outline-none focus:ring-2 focus:ring-offset-2
      disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
      active:scale-[0.98]
      touch-target
    `,x={primary:`
        bg-emerald-700 text-white
        hover:bg-emerald-800 hover:shadow-lg hover:shadow-emerald-500/25
        focus:ring-emerald-500
      `,secondary:`
        bg-white/40 backdrop-blur-xl text-slate-700 border border-white/50
        hover:bg-white/60 hover:text-slate-900
        focus:ring-emerald-500
      `,outline:`
        border-2 border-white/50 text-slate-700 bg-white/40 backdrop-blur-xl
        hover:bg-white/60 hover:border-white/60
        focus:ring-emerald-500
      `,ghost:`
        text-slate-600
        hover:bg-white/50 hover:text-slate-900
        focus:ring-emerald-500
      `,danger:`
        bg-red-600 text-white
        hover:bg-red-700 hover:shadow-lg hover:shadow-red-500/25
        focus:ring-red-500
      `};return(0,t.jsxs)("button",{ref:o,className:(0,l.cn)(c,x[s],{sm:"text-sm px-3.5 py-2",md:"text-sm px-5 py-2.5",lg:"text-base px-6 py-3"}[r],e),disabled:n||a,...d,children:[a&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})});n.displayName="Button"},29752:(e,s,r)=>{"use strict";r.d(s,{Card:()=>n,CardContent:()=>c,CardHeader:()=>i,CardTitle:()=>d,S:()=>o});var t=r(10326),a=r(17577),l=r(51223);let n=(0,a.forwardRef)(({className:e,variant:s="default",...r},a)=>t.jsx("div",{ref:a,className:(0,l.cn)("rounded-3xl border p-5 transition-all duration-300",{default:"bg-white/40 backdrop-blur-2xl border-white/50 shadow-[0_8px_32px_rgba(0,0,0,0.06)] hover:bg-white/50 hover:shadow-[0_8px_32px_rgba(0,0,0,0.1)]",solid:"bg-white/50 backdrop-blur-2xl border-white/60 shadow-[0_8px_32px_rgba(0,0,0,0.08)]",gradient:"bg-gradient-to-br from-white/50 via-white/40 to-white/30 backdrop-blur-2xl border-white/50 shadow-[0_8px_32px_rgba(0,0,0,0.06)]"}[s],e),...r}));n.displayName="Card";let i=(0,a.forwardRef)(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 pb-5",e),...s}));i.displayName="CardHeader";let d=(0,a.forwardRef)(({className:e,...s},r)=>t.jsx("h3",{ref:r,className:(0,l.cn)("text-lg font-semibold text-slate-900",e),...s}));d.displayName="CardTitle";let o=(0,a.forwardRef)(({className:e,...s},r)=>t.jsx("p",{ref:r,className:(0,l.cn)("text-sm text-slate-500",e),...s}));o.displayName="CardDescription";let c=(0,a.forwardRef)(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,l.cn)("",e),...s}));c.displayName="CardContent",(0,a.forwardRef)(({className:e,...s},r)=>t.jsx("div",{ref:r,className:(0,l.cn)("flex items-center pt-5",e),...s})).displayName="CardFooter"},41190:(e,s,r)=>{"use strict";r.d(s,{I:()=>n});var t=r(10326),a=r(17577),l=r(51223);let n=(0,a.forwardRef)(({className:e,label:s,error:r,icon:a,type:n="text",...i},d)=>(0,t.jsxs)("div",{className:"w-full",children:[s&&t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:s}),(0,t.jsxs)("div",{className:"relative",children:[a&&t.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:a}),t.jsx("input",{type:n,ref:d,className:(0,l.cn)("w-full rounded-xl border bg-white/40 backdrop-blur-xl px-4 py-3 text-sm","border-white/50 placeholder:text-slate-400","focus:bg-white/60 focus:border-emerald-300 focus:outline-none focus:ring-4 focus:ring-emerald-500/10","disabled:bg-white/20 disabled:text-slate-400 disabled:cursor-not-allowed","transition-all duration-300 touch-target",a&&"pl-11",r&&"border-red-300 focus:border-red-400 focus:ring-red-500/10",e),...i})]}),r&&t.jsx("p",{className:"mt-1.5 text-sm text-red-500",children:r})]}));n.displayName="Input"},86016:(e,s,r)=>{"use strict";r.d(s,{P:()=>i});var t=r(10326),a=r(17577),l=r(51223);let n=(0,r(62881).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),i=(0,a.forwardRef)(({className:e,label:s,error:r,options:a,...i},d)=>(0,t.jsxs)("div",{className:"w-full",children:[s&&t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:s}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("select",{ref:d,className:(0,l.cn)("w-full rounded-xl border border-white/50 bg-white/40 backdrop-blur-xl px-4 py-2.5 text-sm appearance-none","focus:bg-white/60 focus:border-emerald-300 focus:outline-none focus:ring-2 focus:ring-emerald-500/20","disabled:bg-white/20 disabled:text-slate-500 disabled:cursor-not-allowed","transition-all duration-300 touch-target pr-10",r&&"border-red-500 focus:border-red-500 focus:ring-red-500/20",e),...i,children:a.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))}),t.jsx(n,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]}),r&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}));i.displayName="Select"},25294:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/chrisalexis/travel-expense-crm/src/app/(dashboard)/settings/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[276,790,672,42,829,127],()=>r(52196));module.exports=t})();